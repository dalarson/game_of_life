(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const w of i.addedNodes)w.tagName==="LINK"&&w.rel==="modulepreload"&&r(w)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();class _{static __wrap(e){e=e>>>0;const n=Object.create(_.prototype);return n.__wbg_ptr=e,I.register(n,n.__wbg_ptr,n),n}__destroy_into_raw(){const e=this.__wbg_ptr;return this.__wbg_ptr=0,I.unregister(this),e}free(){const e=this.__destroy_into_raw();l.__wbg_universe_free(e,0)}cells_ptr(){return l.universe_cells_ptr(this.__wbg_ptr)>>>0}static new(e,n){const r=l.universe_new(e,n);return _.__wrap(r)}static new_with_cells(e,n,r){const s=j(r,l.__wbindgen_malloc),i=B,w=l.universe_new_with_cells(e,n,s,i);return _.__wrap(w)}tick(){l.universe_tick(this.__wbg_ptr)}}Symbol.dispose&&(_.prototype[Symbol.dispose]=_.prototype.free);function D(){return{__proto__:null,"./game_of_life_bg.js":{__proto__:null,__wbg___wbindgen_throw_39bc967c0e5a9b58:function(e,n){throw new Error(F(e,n))},__wbindgen_init_externref_table:function(){const e=l.__wbindgen_externrefs,n=e.grow(4);e.set(0,void 0),e.set(n+0,void 0),e.set(n+1,null),e.set(n+2,!0),e.set(n+3,!1)}}}}const I=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(t=>l.__wbg_universe_free(t>>>0,1));function F(t,e){return t=t>>>0,N(t,e)}let y=null;function x(){return(y===null||y.byteLength===0)&&(y=new Uint8Array(l.memory.buffer)),y}function j(t,e){const n=e(t.length*1,1)>>>0;return x().set(t,n/1),B=t.length,n}let m=new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0});m.decode();const k=2146435072;let A=0;function N(t,e){return A+=e,A>=k&&(m=new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0}),m.decode(),A=e),m.decode(x().subarray(t,t+e))}let B=0,l;function V(t,e){return l=t.exports,y=null,l.__wbindgen_start(),l}async function q(t,e){if(typeof Response=="function"&&t instanceof Response){if(typeof WebAssembly.instantiateStreaming=="function")try{return await WebAssembly.instantiateStreaming(t,e)}catch(s){if(t.ok&&n(t.type)&&t.headers.get("Content-Type")!=="application/wasm")console.warn("`WebAssembly.instantiateStreaming` failed because your server does not serve Wasm with `application/wasm` MIME type. Falling back to `WebAssembly.instantiate` which is slower. Original error:\n",s);else throw s}const r=await t.arrayBuffer();return await WebAssembly.instantiate(r,e)}else{const r=await WebAssembly.instantiate(t,e);return r instanceof WebAssembly.Instance?{instance:r,module:t}:r}function n(r){switch(r){case"basic":case"cors":case"default":return!0}return!1}}async function z(t){if(l!==void 0)return l;t!==void 0&&(Object.getPrototypeOf(t)===Object.prototype?{module_or_path:t}=t:console.warn("using deprecated parameters for the initialization function; pass a single object instead")),t===void 0&&(t=new URL("/assets/game_of_life_bg-CTHZjb2J.wasm",import.meta.url));const e=D();(typeof t=="string"||typeof Request=="function"&&t instanceof Request||typeof URL=="function"&&t instanceof URL)&&(t=fetch(t));const{instance:n,module:r}=await q(await t,e);return V(n)}const c=6,H="#333",X="#111",Y="#00ff88",o=128,f=128,G={random:"random",clear:[],glider:[[0,1],[1,2],[2,0],[2,1],[2,2]],"glider-gun":[[0,24],[1,22],[1,24],[2,12],[2,13],[2,20],[2,21],[2,34],[2,35],[3,11],[3,15],[3,20],[3,21],[3,34],[3,35],[4,0],[4,1],[4,10],[4,16],[4,20],[4,21],[5,0],[5,1],[5,10],[5,14],[5,16],[5,17],[5,22],[5,24],[6,10],[6,16],[6,24],[7,11],[7,15],[8,12],[8,13]],pulsar:(()=>{const t=[],e=[[-6,[-4,-3,-2,2,3,4]],[-4,[-6,-1,1,6]],[-3,[-6,-1,1,6]],[-2,[-6,-1,1,6]],[-1,[-4,-3,-2,2,3,4]],[1,[-4,-3,-2,2,3,4]],[2,[-6,-1,1,6]],[3,[-6,-1,1,6]],[4,[-6,-1,1,6]],[6,[-4,-3,-2,2,3,4]]];for(const[n,r]of e)for(const s of r)t.push([n,s]);return t})(),lwss:[[0,1],[0,4],[1,0],[2,0],[2,4],[3,0],[3,1],[3,2],[3,3]],acorn:[[0,1],[1,3],[2,0],[2,1],[2,4],[2,5],[2,6]],"r-pentomino":[[0,1],[0,2],[1,0],[1,1],[2,1]],diehard:[[0,6],[1,0],[1,1],[2,1],[2,5],[2,6],[2,7]]};let O="random";function Z(t){const e=G[t];if(e==="random")return null;const n=new Uint8Array(o*f),r=Math.floor(f/2),s=Math.floor(o/2);for(const[i,w]of e){const v=r+i,L=s+w;v>=0&&v<f&&L>=0&&L<o&&(n[v*o+L]=1)}return n}function S(t){const e=Z(t);return e?_.new_with_cells(o,f,e):_.new(o,f)}let d,h,b=null,C=!0;const u=document.getElementById("game-canvas"),a=u.getContext("2d");u.width=c*o+1;u.height=c*f+1;function p(){a.beginPath(),a.strokeStyle=H,a.lineWidth=.5;for(let t=0;t<=o;t++){const e=t*c+.5;a.moveTo(e,0),a.lineTo(e,u.height)}for(let t=0;t<=f;t++){const e=t*c+.5;a.moveTo(0,e),a.lineTo(u.width,e)}a.stroke()}function g(){const t=d.cells_ptr(),e=new Uint8Array(h.buffer,t,o*f);a.beginPath(),a.fillStyle=Y;for(let n=0;n<f;n++)for(let r=0;r<o;r++)e[n*o+r]===1&&a.fillRect(r*c+1,n*c+1,c-1,c-1);a.beginPath(),a.fillStyle=X;for(let n=0;n<f;n++)for(let r=0;r<o;r++)e[n*o+r]===0&&a.fillRect(r*c+1,n*c+1,c-1,c-1)}function M(){d.tick(),p(),g(),b=requestAnimationFrame(M)}function W(){C=!0,T.textContent="⏸ Pause",M()}function J(){C=!1,T.textContent="▶ Play",b!==null&&(cancelAnimationFrame(b),b=null)}let E=!1,R=1;function U(t){const e=u.getBoundingClientRect(),n=u.width/e.width,r=u.height/e.height,s=(t.clientX-e.left)*n,i=(t.clientY-e.top)*r;return[Math.floor(i/c),Math.floor(s/c)]}function K(t,e,n){if(t<0||t>=f||e<0||e>=o)return;const r=d.cells_ptr(),s=new Uint8Array(h.buffer,r,o*f);s[t*o+e]=n}u.addEventListener("mousedown",t=>{E=!0;const[e,n]=U(t);if(e<0||e>=f||n<0||n>=o)return;const r=d.cells_ptr(),s=new Uint8Array(h.buffer,r,o*f),i=e*o+n;R=s[i]===1?0:1,s[i]=R,p(),g()});u.addEventListener("mousemove",t=>{if(!E)return;const[e,n]=U(t);K(e,n,R),p(),g()});u.addEventListener("mouseup",()=>{E=!1});u.addEventListener("mouseleave",()=>{E=!1});const T=document.getElementById("play-pause"),Q=document.getElementById("step"),$=document.getElementById("reset");T.addEventListener("click",()=>{C?J():W()});Q.addEventListener("click",()=>{d.tick(),p(),g()});$.addEventListener("click",()=>{d.free(),d=S(O),p(),g()});const P=document.querySelectorAll("[data-preset]");P.forEach(t=>{t.addEventListener("click",()=>{const e=t.dataset.preset;O=e,P.forEach(n=>n.classList.remove("active")),t.classList.add("active"),d.free(),d=S(e),p(),g()})});async function ee(){h=(await z()).memory,d=S(O),p(),g(),W()}ee();
